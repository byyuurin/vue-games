var W=Object.defineProperty,J=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var I=(e,s,t)=>s in e?W(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,g=(e,s)=>{for(var t in s||(s={}))Q.call(s,t)&&I(e,t,s[t]);if(U)for(var t of U(s))X.call(s,t)&&I(e,t,s[t]);return e},h=(e,s)=>J(e,K(s));import{c as Y,_ as Z}from"./utils.fb7ecbc0.js";import{k as b,u as i,j as O,d as N,D as ee,e as j,E as te,G as T,o as w,c as _,a as o,C as ne,t as k,n as A,q as G,s as se,F as R,r as F,g as oe,H as ie,y as H,m as le,f as ae,I as re,h as ue,J as ce,x as S,p as C,v as de,b as q,z as L,A as V,K as pe}from"./assets/index.39e4bf9f.js";const $=b(!0),y=b(!1);function fe(e,s){return{x:e%s,y:Math.floor(e/s)}}function ve(e,s,t){let n=0;return e.filter(u=>u>0).forEach((u,d)=>{let r=d+1;for(;r<e.length;){const a=e[r];u>a&&n++,r++}}),s%2?n%2===0:n%2===t%2}function E(e,s){const{columns:t,rows:n,gaps:u}=e,d=Y(e.seed),r=[],a=[];let c=0;const m=Array.from({length:t*n}).map((p,f)=>{const x=fe(f,t),l={sequence:f+1,origin:x,position:x,columns:t,gaps:u};return a.push(x),l}).map(p=>{const f=a.splice(Math.floor(d()*a.length),1)[0];return p.position=f,f.x===s.x&&f.y===s.y&&(p.invisible=!0,c=p.origin.y+f.y),r[f.y*t+f.x]=p.invisible?0:p.sequence,p});return ve(r.filter(p=>p>0),t,c)?(y.value=!1,m):E(e,s)}function me(e,s){return[h(g({},e),{x:e.x+1}),h(g({},e),{x:e.x-1}),h(g({},e),{y:e.y+1}),h(g({},e),{y:e.y-1})].some(n=>n.x===s.x&&n.y===s.y)}function ge(e,s,t){return i(e).board.map(n=>n.position.x===s.x&&n.position.y===s.y?h(g({},n),{position:t}):n.position.x===t.x&&n.position.y===t.y?h(g({},n),{position:s}):n)}function D(e){const{timestamp:s,board:t}=i(e);y.value=t.every(n=>n.origin.x===n.position.x&&n.origin.y===n.position.y),y.value&&!s.end&&(e.value.timestamp.end=Date.now())}function xe(e){const{rows:s}=i(e);let t={x:0,y:s-1};const n=O("n-puzzle-state",{timestamp:{begin:0,end:0},options:i(e),board:E(i(e),t),steps:0}),u=()=>{const{options:r}=i(n);t={x:0,y:r.rows-1},n.value={timestamp:{begin:0,end:0},options:r,board:E(r,t),steps:0}},d=r=>{const{begin:a}=i(n).timestamp;!me(t,r)||(a||(n.value.timestamp.begin=Date.now()),n.value.board=ge(n,t,r),t=r,n.value.steps++,D(n))};return D(n),{state:n,reset:u,move:d}}const he={flex:"","justify-center":"","items-center":"",class:"w-$self-width h-$self-height"},ye=N({props:{sequence:null,origin:{default:()=>({x:0,y:0})},position:{default:()=>({x:0,y:0})},columns:{default:0},gaps:{default:0},invisible:{type:Boolean,default:!1},reversed:{type:Boolean}},setup(e){const s=e,t=ee(),n=b(null),u=b({width:0,height:0}),d=j(()=>s.origin.x===s.position.x&&s.origin.y===s.position.y),r=j(()=>{const{origin:c,position:m,columns:p,gaps:f,reversed:x=!1}=s,{width:l,height:z}=i(u),M={x:(x?c:m).x-c.x,y:(x?c:m).y-c.y},B={x:M.x*(l+f),y:M.y*(z+f)},v={x:-1*c.x*l+c.x*f,y:-1*c.y*z+c.y*f,width:p*l+(p-1)*f};return`
  --self-width: ${l}px;
  --self-height: ${z}px;
  --self-x: ${B.x}px;
  --self-y: ${B.y}px;
  --inner-width:${v.width}px;
  --inner-x:${v.x}px;
  --inner-y:${v.y}px;
  `});function a(){u.value={width:n.value.offsetWidth,height:n.value.offsetHeight}}return te(a),T([$,y],()=>a()),(c,m)=>(w(),_("div",{ref_key:"el",ref:n,relative:"",flex:"","justify-center":"","items-center":"","overflow-hidden":"",bg:"gray-500/10",class:A(["group translate-x-$self-x translate-y-$self-y hover:cursor-pointer",{"transition duration-150":!e.invisible,invisible:!i(y)&&e.invisible,"-z-1 pointer-events-none":i(y)||e.reversed||e.invisible}]),style:G(i(r))},[o("div",{"pointer-events-none":"",transition:"","duration-100":"",class:A({"group-hover:opacity-75":!i(y),"bg-teal-700/50":!i(t).default,"absolute left-$inner-x top-$inner-y w-$inner-width":i(t).default,"grayscale opacity-50":e.reversed||!i(d)})},[ne(c.$slots,"default",{},()=>[o("div",he,k(e.sequence),1)])],2)],6))}}),be={"inline-block":""},we={flex:"~ gap-$cell-gap wrap",w:"$puzzle-width",text:"4xl dark/20 dark:white/20",bg:"gray-500/10",rounded:"","overflow-hidden":""},_e=["src"],ke=["src"],$e=N({props:{state:null,src:{default:""},size:{default:100},reversed:{type:Boolean}},emits:["click"],setup(e,{emit:s}){const t=e,n=b(null),u=b({width:t.size,height:t.size,gaps:t.state.options.gaps}),d=j(()=>{const{columns:c,gaps:m}=t.state.options;return se.md.value||!n.value?t.size:Math.floor((n.value.offsetWidth-20-(c-1)*m)/c)}),r=j(()=>{const{width:c,height:m,gaps:p}=i(u),{columns:f}=t.state.options;return`
    --fetch-width: ${d.value}px;
    --puzzle-width: ${c*f+(f-1)*p}px;
    --cell-width: ${c}px;
    --cell-height: ${m}px;
    --cell-gap: ${y.value?0:p}px;
  `});function a(c){const{width:m,height:p}=c.target;u.value=h(g({},i(u)),{width:m,height:p}),re(()=>{$.value=!1})}return T(()=>[t.src],()=>{$.value=!0}),(c,m)=>{const p=ye;return w(),_("div",{relative:"","p-6":"",style:G(i(r))},[o("div",{ref_key:"el",ref:n,"text-center":"","overflow-auto":"","select-none":""},[o("div",be,[o("div",we,[(w(!0),_(R,null,F(e.state.board,(f,x)=>(w(),oe(p,le({key:x},f,{reversed:e.reversed,w:"$cell-width",h:"$cell-height",onClick:l=>s("click",f.position)}),ie({_:2},[!i($)&&e.src?{name:"default",fn:H(()=>[o("img",{"w-full":"","object-cover":"",src:e.src},null,8,_e)])}:void 0]),1040,["reversed","onClick"]))),128))]),i($)&&e.src?(w(),_("img",{key:0,z:"-9999",fixed:"",invisible:"","h-auto":"",src:e.src,class:"w-$fetch-width",onLoad:a},null,40,ke)):ae("",!0)])],512)],4)}}}),ze={text:"2xl black/75 dark:white/75",flex:"~ gap-4","justify-center":"","items-center":""},Ce={flex:"~ gap-1","justify-center":"","items-center":""},je=o("i",{"i-mdi-clock-time-twelve-outline":""},null,-1),Me={"text-lg":"","self-end":""},Be={flex:"~ gap-1","justify-center":"","items-center":""},Le=o("i",{"i-ic-baseline-directions-run":""},null,-1),Ne=N({props:{begin:null,end:null,steps:null},setup(e){const s=e,t=ue(),n=j(()=>{const{begin:u,end:d}=s;let r=0;return u&&d&&(r=d-u),u&&!d&&(r=+t.value-u),(r/1e3).toFixed(2).split(".")});return(u,d)=>(w(),_("div",ze,[o("div",Ce,[je,o("div",null,[o("span",null,k(i(n)[0]),1),o("span",Me,"."+k(i(n)[1]),1)])]),o("div",Be,[Le,o("div",null,k(e.steps),1)])]))}}),Se={"pb-4":""},Ve=o("h2",{text:"5xl center ellipsis",leading:"2em","overflow-hidden":""}," N-Puzzle ",-1),Ae={"py-4":"",flex:"~ wrap gap-2","justify-center":""},Ee={sticky:"","bottom-20px":"","z-2":"","px-4":"",flex:"~ gap-2","justify-center":"","items-end":""},Ue={flex:"~ gap-1 col"},Ie={flex:"~ gap-1 col"},qe={flex:"~ gap-1 col"},De=L(" Image "),Te={"py-4":"","text-center":""},Ge={"m-auto":""},Re={"inline-flex":"",flex:"wrap gap-2","justify-center":""},Fe=["value"],He=["src"],Pe={flex:"~ gap-1 col"},We=L(" Or image url "),Je={"py-8":"",flex:"~ gap-4","justify-center":""},Ke=N({setup(e){const s={easy:{columns:3,rows:3},medium:{columns:4,rows:4},hard:{columns:5,rows:5}},t=["https://cdn.discordapp.com/attachments/757420273350868993/957120284085866516/LINE_ALBUM_300_220309_111.jpg","https://cdn.discordapp.com/attachments/757420273350868993/957120284434006086/LINE_ALBUM_300_220309_132.jpg","https://cdn.discordapp.com/attachments/757420273350868993/957120284706603008/LINE_ALBUM_300_220309_197.jpg","https://cdn.discordapp.com/attachments/757420273350868993/957120284996018266/LINE_ALBUM_300_220309_286.jpg"],n=()=>t[Math.floor(Math.random()*t.length)],u=xe(h(g({},s.easy),{gaps:1,background:n()})),{state:d}=u,r=b(!1),a=b(h(g({},i(d).options),{background:"",url:""})),c=b(!1),m=ce(c);function p(x){let l={};switch(x){case"easy":case"medium":case"hard":l=h(g(g({},i(d).options),s[x]),{background:n()});break;case"customize":l=h(g({},i(d).options),{columns:a.value.columns,rows:a.value.rows,background:a.value.url||a.value.background});break;default:l=x}$.value=!0,r.value=!1,d.value.options=l,u.reset()}function f(){a.value=h(g({background:""},i(d).options),{url:""}),r.value=!0}return(x,l)=>{const z=Ne,M=$e,B=Z;return w(),_("div",Se,[Ve,o("div",Ae,[o("button",{btn:"~ sky",onClick:l[0]||(l[0]=(...v)=>i(u).reset&&i(u).reset(...v))}," New Game "),o("button",{btn:"",onClick:l[1]||(l[1]=v=>p("easy"))}," Easy "),o("button",{btn:"",onClick:l[2]||(l[2]=v=>p("medium"))}," Medium "),o("button",{btn:"",onClick:l[3]||(l[3]=v=>p("hard"))}," Hard "),o("button",{btn:"",onClick:f}," Customize ")]),S(z,{begin:i(d).timestamp.begin,end:i(d).timestamp.end,steps:i(d).steps},null,8,["begin","end","steps"]),S(M,{state:i(d),size:150,src:i(d).options.background,reversed:c.value,onClick:i(u).move},null,8,["state","src","reversed","onClick"]),o("div",Ee,[C(o("button",{btn:"~ solid-yellow",onClick:l[4]||(l[4]=()=>i(m)())},k(c.value?"Continue":"Check Answer"),513),[[de,!i(y)]])]),S(B,{visible:r.value,title:"Customize Settings",size:"md"},{default:H(()=>[o("label",Ue,[L(" Columns: "+k(a.value.columns)+" ",1),C(o("input",{"onUpdate:modelValue":l[5]||(l[5]=v=>a.value.columns=v),p:"2",bg:"gray-500/10",text:"red-200",type:"range",min:"2",max:"8"},null,512),[[V,a.value.columns,void 0,{number:!0}]])]),o("label",Ie,[L(" Rows: "+k(a.value.rows)+" ",1),C(o("input",{"onUpdate:modelValue":l[6]||(l[6]=v=>a.value.rows=v),p:"2",bg:"gray-500/10",text:"red-200",type:"range",min:"2",max:"8"},null,512),[[V,a.value.rows,void 0,{number:!0}]])]),o("div",qe,[De,o("div",Te,[o("div",Ge,[o("div",Re,[(w(),_(R,null,F(t,v=>o("label",{key:v,"p-4":"","cursor-pointer":"",rounded:"",flex:"~","items-center":"",class:A({"bg-gray-500/10":v!==a.value.background,"bg-teal-600/75":v===a.value.background})},[C(o("input",{"onUpdate:modelValue":l[7]||(l[7]=P=>a.value.background=P),hidden:"",type:"radio",value:v},null,8,Fe),[[pe,a.value.background]]),o("img",{"max-w-100px":"",src:v,alt:"image 1"},null,8,He)],2)),64))])])])]),o("label",Pe,[We,C(o("input",{"onUpdate:modelValue":l[8]||(l[8]=v=>a.value.url=v),type:"text",bg:"gray-500/10","p-2":"","w-full":"","dark:text-white":"",rounded:"","outline-none":""},null,512),[[V,a.value.url]])]),o("div",Je,[o("button",{btn:"~ sky",onClick:l[9]||(l[9]=v=>p("customize"))}," Confirm "),o("button",{btn:"solid-sky",onClick:l[10]||(l[10]=v=>r.value=!1)}," Cancel ")])]),_:1},8,["visible"])])}}});typeof q=="function"&&q(Ke);export{Ke as default};

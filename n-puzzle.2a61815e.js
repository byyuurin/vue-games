var P=Object.defineProperty,W=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var I=(e,n,t)=>n in e?P(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,x=(e,n)=>{for(var t in n||(n={}))K.call(n,t)&&I(e,t,n[t]);if(U)for(var t of U(n))O.call(n,t)&&I(e,t,n[t]);return e},h=(e,n)=>W(e,J(n));import{c as Q,_ as X}from"./utils.fa0b5a83.js";import{k as y,u as a,j as Y,d as N,D as Z,e as L,E as ee,G as D,o as b,c as _,a as o,C as te,t as k,n as A,q as R,H as ne,F as T,r as G,g as se,I as oe,y as F,m as ie,f as ae,J as le,s as re,h as ue,K as ce,x as S,p as C,v as de,b as q,z as B,A as V,L as pe}from"./assets/index.7ce7aeb1.js";const z=y(!0),w=y(!1);function fe(e,n){return{x:e%n,y:Math.floor(e/n)}}function ve(e,n,t){let s=0;return e.filter(c=>c>0).forEach((c,u)=>{let r=u+1;for(;r<e.length;){const l=e[r];c>l&&s++,r++}}),n%2?s%2===0:s%2===t%2}function E(e,n){const{columns:t,rows:s,gaps:c}=e,u=Q(e.seed),r=[],l=[];let v=0;const m=Array.from({length:t*s}).map((d,p)=>{const g=fe(p,t),i={sequence:p+1,origin:g,position:g,columns:t,gaps:c};return l.push(g),i}).map(d=>{const p=l.splice(Math.floor(u()*l.length),1)[0];return d.position=p,p.x===n.x&&p.y===n.y&&(d.invisible=!0,d.sequence=0,v=d.origin.y+p.y),r[p.y*t+p.x]=d.sequence,d});return ve(r.filter(d=>d>0),t,v)?(w.value=!1,m):E(e,n)}function ge(e,n){return[h(x({},e),{x:e.x+1}),h(x({},e),{x:e.x-1}),h(x({},e),{y:e.y+1}),h(x({},e),{y:e.y-1})].some(s=>s.x===n.x&&s.y===n.y)}function me(e,n,t){return a(e).board.map(s=>s.position.x===n.x&&s.position.y===n.y?h(x({},s),{position:t}):s.position.x===t.x&&s.position.y===t.y?h(x({},s),{position:n}):s)}function xe(e){const{board:n}=a(e);w.value=n.every(t=>t.origin.x===t.position.x&&t.origin.y===t.position.y),w.value&&(e.value.timestamp.end=Date.now())}function he(e){const{rows:n}=a(e);let t={x:0,y:n-1};const s=Y("n-puzzle-state",{timestamp:{begin:0,end:0},options:a(e),board:E(a(e),t),steps:0});return{state:s,reset:()=>{const{options:r}=a(s);t={x:0,y:r.rows-1},s.value={timestamp:{begin:0,end:0},options:r,board:E(r,t),steps:0}},move:r=>{const{begin:l}=a(s).timestamp;!ge(t,r)||(l||(s.value.timestamp.begin=Date.now()),s.value.board=me(s,t,r),t=r,s.value.steps++,xe(s))}}}const ye={flex:"","justify-center":"","items-center":"",class:"w-$self-width h-$self-height"},be=N({props:{sequence:null,origin:{default:()=>({x:0,y:0})},position:{default:()=>({x:0,y:0})},columns:{default:0},gaps:{default:0},invisible:{type:Boolean,default:!1},reversed:{type:Boolean}},setup(e){const n=e,t=Z(),s=y(null),c=y({width:0,height:0}),u=L(()=>n.origin.x===n.position.x&&n.origin.y===n.position.y),r=L(()=>{const{origin:v,position:m,columns:d,gaps:p,reversed:g=!1}=n,{width:i,height:$}=a(c),j={x:(g?v:m).x-v.x,y:(g?v:m).y-v.y},M={x:j.x*(i+p),y:j.y*($+p)},f={x:-1*v.x*i+v.x*p,y:-1*v.y*$+v.y*p,width:d*i+(d-1)*p};return`
  --self-width: ${i}px;
  --self-height: ${$}px;
  --self-x: ${M.x}px;
  --self-y: ${M.y}px;
  --inner-width:${f.width}px;
  --inner-x:${f.x}px;
  --inner-y:${f.y}px;
  `});function l(){c.value={width:s.value.offsetWidth,height:s.value.offsetHeight}}return ee(l),D([z,w],()=>l()),(v,m)=>(b(),_("div",{ref_key:"el",ref:s,relative:"",flex:"","justify-center":"","items-center":"","overflow-hidden":"",bg:"gray-500/10",class:A(["group translate-x-$self-x translate-y-$self-y hover:cursor-pointer",{"transition duration-150":!e.invisible,invisible:!a(w)&&e.invisible,"-z-1 pointer-events-none":a(w)||e.reversed||e.invisible}]),style:R(a(r))},[o("div",{absolute:"","top-0":"","left-0":"","pointer-events-none":"",transition:"","duration-100":"",class:A({"group-hover:bg-gray-500/10":!a(t).default,"group-hover:opacity-50 w-$inner-width translate-x-$inner-x translate-y-$inner-y":a(t).default,"opacity-50":e.reversed||!a(u)})},[te(v.$slots,"default",{},()=>[o("div",ye,k(e.sequence),1)])],2)],6))}}),we={"inline-block":""},_e={flex:"~ gap-$cell-gap wrap",w:"$puzzle-width",text:"4xl dark/20 dark:white/20",bg:"gray-500/10",rounded:"","overflow-hidden":""},ke=["src"],$e=["src"],ze=N({props:{state:null,src:{default:""},size:{default:100},reversed:{type:Boolean}},emits:["click"],setup(e,{emit:n}){const t=e,s=y(null),c=y(t.size),u=y({width:t.size,height:t.size,gaps:t.state.options.gaps}),r=L(()=>{const{width:m,height:d,gaps:p}=a(u),{columns:g}=t.state.options;return`
    --fetch-width: ${c.value}px;
    --puzzle-width: ${m*g+(g-1)*p}px;
    --cell-width: ${m}px;
    --cell-height: ${d}px;
    --cell-gap: ${w.value?0:p}px;
  `});function l(){const{columns:m,gaps:d}=t.state.options;c.value=re.md.value?t.size:Math.floor((s.value.offsetWidth-(m-1)*d)/m)}function v(m){const{width:d,height:p}=m.target;u.value=h(x({},a(u)),{width:d,height:p}),le(()=>{z.value=!1})}return D(()=>t.src,()=>{l(),z.value=!0}),ne(s,l),(m,d)=>{const p=be;return b(),_("div",{relative:"","p-6":"",style:R(a(r))},[o("div",{ref_key:"el",ref:s,"text-center":"","overflow-auto":"","select-none":""},[o("div",we,[o("div",_e,[(b(!0),_(T,null,G(e.state.board,(g,i)=>(b(),se(p,ie({key:i},g,{reversed:e.reversed,w:"$cell-width",h:"$cell-height",onClick:$=>n("click",g.position)}),oe({_:2},[!a(z)&&e.src?{name:"default",fn:F(()=>[o("img",{"w-full":"","object-cover":"",src:e.src},null,8,ke)])}:void 0]),1040,["reversed","onClick"]))),128))]),a(z)&&e.src?(b(),_("img",{key:0,z:"-9999",fixed:"",invisible:"","h-auto":"",src:e.src,class:"w-$fetch-width",onLoad:v},null,40,$e)):ae("",!0)])],512)],4)}}}),Ce={text:"2xl black/75 dark:white/75",flex:"~ gap-4","justify-center":"","items-center":""},je={flex:"~ gap-1","justify-center":"","items-center":""},Me=o("i",{"i-mdi-clock-time-twelve-outline":""},null,-1),Le={"text-lg":"","self-end":""},Be={flex:"~ gap-1","justify-center":"","items-center":""},Ne=o("i",{"i-ic-baseline-directions-run":""},null,-1),Se=N({props:{begin:null,end:null,steps:null},setup(e){const n=e,t=ue(),s=L(()=>{const{begin:c,end:u}=n;let r=0;return c&&u&&(r=u-c),c&&!u&&(r=+t.value-c),(r/1e3).toFixed(2).split(".")});return(c,u)=>(b(),_("div",Ce,[o("div",je,[Me,o("div",null,[o("span",null,k(a(s)[0]),1),o("span",Le,"."+k(a(s)[1]),1)])]),o("div",Be,[Ne,o("div",null,k(e.steps),1)])]))}}),Ve={"pb-4":""},Ae=o("h2",{text:"5xl center ellipsis",leading:"2em","overflow-hidden":""}," N-Puzzle ",-1),Ee={"py-4":"",flex:"~ wrap gap-2","justify-center":""},Ue={sticky:"","bottom-20px":"","z-2":"","px-4":"",flex:"~ gap-2","justify-center":"","items-end":""},Ie={flex:"~ gap-1 col"},qe={flex:"~ gap-1 col"},De={flex:"~ gap-1 col"},Re=B(" Image "),Te={"py-4":"","text-center":""},Ge={"m-auto":""},Fe={"inline-flex":"",flex:"wrap gap-2","justify-center":""},He=["value"],Pe=["src"],We={flex:"~ gap-1 col"},Je=B(" Or image url "),Ke={"py-8":"",flex:"~ gap-4","justify-center":""},Oe=N({setup(e){const n={easy:{columns:3,rows:3},medium:{columns:4,rows:4},hard:{columns:5,rows:5}},t=["https://cdn.discordapp.com/attachments/757420273350868993/957120284085866516/LINE_ALBUM_300_220309_111.jpg","https://cdn.discordapp.com/attachments/757420273350868993/957120284434006086/LINE_ALBUM_300_220309_132.jpg","https://cdn.discordapp.com/attachments/757420273350868993/957120284706603008/LINE_ALBUM_300_220309_197.jpg","https://cdn.discordapp.com/attachments/757420273350868993/957120284996018266/LINE_ALBUM_300_220309_286.jpg"],s=()=>t[Math.floor(Math.random()*t.length)],c=he(h(x({},n.easy),{gaps:1,background:s()})),{state:u}=c,r=y(!1),l=y(h(x({},a(u).options),{background:"",url:""})),v=y(!1),m=ce(v);function d(g){let i={};switch(g){case"easy":case"medium":case"hard":i=h(x(x({},a(u).options),n[g]),{background:s()});break;case"customize":i=h(x({},a(u).options),{columns:l.value.columns,rows:l.value.rows,background:l.value.url||l.value.background});break;default:i=g}z.value=!0,r.value=!1,u.value.options=i,c.reset()}function p(){l.value=h(x({background:""},a(u).options),{url:""}),r.value=!0}return(g,i)=>{const $=Se,j=ze,M=X;return b(),_("div",Ve,[Ae,o("div",Ee,[o("button",{btn:"~ sky",onClick:i[0]||(i[0]=(...f)=>a(c).reset&&a(c).reset(...f))}," New Game "),o("button",{btn:"",onClick:i[1]||(i[1]=f=>d("easy"))}," Easy "),o("button",{btn:"",onClick:i[2]||(i[2]=f=>d("medium"))}," Medium "),o("button",{btn:"",onClick:i[3]||(i[3]=f=>d("hard"))}," Hard "),o("button",{btn:"",onClick:p}," Customize ")]),S($,{begin:a(u).timestamp.begin,end:a(u).timestamp.end,steps:a(u).steps},null,8,["begin","end","steps"]),S(j,{state:a(u),size:150,src:a(u).options.background,reversed:v.value,onClick:a(c).move},null,8,["state","src","reversed","onClick"]),o("div",Ue,[C(o("button",{btn:"~ solid-yellow",onClick:i[4]||(i[4]=()=>a(m)())},k(v.value?"Continue":"Check Answer"),513),[[de,!a(w)]])]),S(M,{visible:r.value,title:"Customize Settings",size:"md"},{default:F(()=>[o("label",Ie,[B(" Columns: "+k(l.value.columns)+" ",1),C(o("input",{"onUpdate:modelValue":i[5]||(i[5]=f=>l.value.columns=f),p:"2",bg:"gray-500/10",text:"red-200",type:"range",min:"2",max:"8"},null,512),[[V,l.value.columns,void 0,{number:!0}]])]),o("label",qe,[B(" Rows: "+k(l.value.rows)+" ",1),C(o("input",{"onUpdate:modelValue":i[6]||(i[6]=f=>l.value.rows=f),p:"2",bg:"gray-500/10",text:"red-200",type:"range",min:"2",max:"8"},null,512),[[V,l.value.rows,void 0,{number:!0}]])]),o("div",De,[Re,o("div",Te,[o("div",Ge,[o("div",Fe,[(b(),_(T,null,G(t,f=>o("label",{key:f,"p-4":"","cursor-pointer":"",rounded:"",flex:"~","items-center":"",class:A({"bg-gray-500/10":f!==l.value.background,"bg-teal-600/75":f===l.value.background})},[C(o("input",{"onUpdate:modelValue":i[7]||(i[7]=H=>l.value.background=H),hidden:"",type:"radio",value:f},null,8,He),[[pe,l.value.background]]),o("img",{"max-w-100px":"",src:f,alt:"image 1"},null,8,Pe)],2)),64))])])])]),o("label",We,[Je,C(o("input",{"onUpdate:modelValue":i[8]||(i[8]=f=>l.value.url=f),type:"text",bg:"gray-500/10","p-2":"","w-full":"","dark:text-white":"",rounded:"","outline-none":""},null,512),[[V,l.value.url]])]),o("div",Ke,[o("button",{btn:"~ sky",onClick:i[9]||(i[9]=f=>d("customize"))}," Confirm "),o("button",{btn:"solid-sky",onClick:i[10]||(i[10]=f=>r.value=!1)}," Cancel ")])]),_:1},8,["visible"])])}}});typeof q=="function"&&q(Oe);export{Oe as default};
